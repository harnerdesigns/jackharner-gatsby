{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/convertkit-subscriber-count-on-gatsby-site/","result":{"data":{"site":{"siteMetadata":{"title":"Jack Harner","description":"Jack Harner is a Freelance Web Developer & E-Commerce Consultant based in Denver, Colorado. Shopify, BigCommerce, WordPress Dev & More.","author":"@jackharner","siteUrl":"https://jackharner.com"}},"markdownRemark":{"html":"<h1 id=\"do-you-want-to-include-the-subscriber-count-from-your-convertkit-newsletter-on-your-gatsbyjs-site\" style=\"position:relative;\"><a href=\"#do-you-want-to-include-the-subscriber-count-from-your-convertkit-newsletter-on-your-gatsbyjs-site\" aria-label=\"do you want to include the subscriber count from your convertkit newsletter on your gatsbyjs site permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Do you want to include the Subscriber Count from your <a href=\"https://convertkit.com?lmref=HnoQfg\">ConvertKit</a> Newsletter on your Gatsby.js Site?</h1>\n<p>If that oddly specific scenario applies to you then read on, and I'll show you just how to do it.</p>\n<p>If not, consider checking out <a href=\"https://convertkit.com?lmref=HnoQfg\">ConvertKit</a> anyway. They make it super simple to spin up your own Newsletter and start building out a mailing list today!</p>\n<p>Displaying your subscriber count will allow you to take advantage of a psychological phenomenon called \"Social Proof\". Social Proof is the idea that if something is perceived as \"popular\", then that thing is worth paying attention to or checking out. By letting prospective sign ups know that you've got the attention of a bunch of other people, they're more likely to also sign up.</p>\n<p>It's why things like those \"John Smith in Bumfuck, Nowhere just Purchased our Product\" popups, and \"15 Other People are Looking at this item right now\" messages are so popular and prevalent among e-commerce stores. They create a sense of urgency and stokes that \"I want to be one of the cool kids\" feeling we all seem to have.</p>\n<p>I'll leave the psychology to the psychologists, let's dive in.</p>\n<h2 id=\"get-api-keys-from-convertkit\" style=\"position:relative;\"><a href=\"#get-api-keys-from-convertkit\" aria-label=\"get api keys from convertkit permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Get API Keys from <a href=\"https://convertkit.com?lmref=HnoQfg\">ConvertKit</a></h2>\n<p>The first thing you need to do is get your account's API keys from <a href=\"https://convertkit.com?lmref=HnoQfg\">ConvertKit</a>. They're located under <code class=\"language-text\">Account Settings > General</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA8UlEQVR42nWQ227EIAxE9/9/tGkCm4DvTsAV2SqNttrRiAfEsYd5sFgFFrGI7r6XWpklInofvut1c7m1/tgqpmepKMhqvotoa62fXL+pnbrPGvBzg+8lz2kFUlUjQjeLCPfd1K9FvbX+H14LTnPeKpK4qG0VWDUi1HdRi88acEUpwCM2qcwLfU06L1FK1DrOu1O61zBgZCNxFMdKsiREZEQTOcz6cbwcxzHermvckg8YSJHtF05Z96P1fpyd/bX1KrCUDzDbiL0knCZNyXK2dDpnTWkMTbnn/P7nCyZxZoVSCUZyBGBEAiQAAoSK7v4G/wAtMw24Zj3YkgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ConvertKit Keys Location\"\n        title=\"ConvertKit Keys Location\"\n        src=\"/static/8f8ad566916ef9f0f9cb6ceb73f410ea/c1b63/ConvertKit-Keys.png\"\n        srcset=\"/static/8f8ad566916ef9f0f9cb6ceb73f410ea/5a46d/ConvertKit-Keys.png 300w,\n/static/8f8ad566916ef9f0f9cb6ceb73f410ea/0a47e/ConvertKit-Keys.png 600w,\n/static/8f8ad566916ef9f0f9cb6ceb73f410ea/c1b63/ConvertKit-Keys.png 1200w,\n/static/8f8ad566916ef9f0f9cb6ceb73f410ea/add4c/ConvertKit-Keys.png 1452w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>To store your keys securely and away from prying eyes, we're going to take advantage of Environment Variables. If you don't already use them, create a <code class=\"language-text\">.env</code> file in the root of your Gatsby project, and paste this block of code in there:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">CONVERTKIT_KEY=xxxxxxxxxxxxxx\nCONVERTKIT_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxx</code></pre></div>\n<p>Replace the <code class=\"language-text\">xxxx</code>'s with your corresponding API Key and API Secret.</p>\n<h2 id=\"security\" style=\"position:relative;\"><a href=\"#security\" aria-label=\"security permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Security</h2>\n<p>Make sure to include <code class=\"language-text\">.env</code> in your <code class=\"language-text\">.gitignore</code> file so you don't check in your keys to your Git Repo. If someone were to get access to your API keys it would be the same as them having your username and password. They can control any part of your account and send a bunch of spam emails to your list. If you're using some sort of Continuous Deployment (CD) setup, you'll also need to include your Keys as Environment Variables according to your specific CD tool.</p>\n<p>{{{vert}}}</p>\n<h2 id=\"make-the-call\" style=\"position:relative;\"><a href=\"#make-the-call\" aria-label=\"make the call permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Make The Call</h2>\n<p>In accordance with the bit above about security, we don't want to expose our API Keys to the public. The beauty of Gatsby and other Static Site Generators is that you can do things at build time instead of at run time or \"in the browser\". This keeps the Keys locked away behind your CD tools \"Secrets\" and away from the snooping eyes of the public.</p>\n<p>For this purpose we're going to take advantage of the <code class=\"language-text\">gatsby-node.js</code> file in the root of our site. If you are unfamiliar with how Gatsby Builds, a part of the process includes running the <code class=\"language-text\">gatsby-node.js</code> file once. You can use this to create pages dynamically, add/modify nodes on your GraphQL tree, and more. This is where we're going to hit the <a href=\"https://convertkit.com?lmref=HnoQfg\">ConvertKit</a> API.</p>\n<p>First things first, you'll need to install <code class=\"language-text\">node-fetch</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"command-line-prompt\"><span data-user=jack data-host=localhost></span></span><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> node-fetch</code></pre></div>\n<p>Then require it at the top of <code class=\"language-text\">gatsby-node.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> fetch <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"node-fetch\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>After everything else in that file (if there is anything) create a new asynchronous function called <code class=\"language-text\">getSubscriberCount</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getSubscriberCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ck_secret<span class=\"token punctuation\">,</span> ck_key</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Where the magic happens...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"now-this-is-where-the-fun-begins\" style=\"position:relative;\"><a href=\"#now-this-is-where-the-fun-begins\" aria-label=\"now this is where the fun begins permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Now This Is Where The Fun Begins</h2>\n<p>Here's the meat of the <code class=\"language-text\">getSubscriberCount</code> function. We're using <code class=\"language-text\">node-fetch</code> to \"fetch\" the subscriber count from the <a href=\"https://convertkit.com?lmref=HnoQfg\">ConvertKit</a> API. We include the <a href=\"https://convertkit.com?lmref=HnoQfg\">ConvertKit</a> keys as Parameters to the function and then pass them as URL Parameters to the <code class=\"language-text\">/subscribers</code> endpoint.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getSubscriberCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ck_secret<span class=\"token punctuation\">,</span> ck_key</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"https://api.convertkit.com/v3/subscribers?api_key=\"</span> <span class=\"token operator\">+</span>\n      ck_key <span class=\"token operator\">+</span>\n      <span class=\"token string\">\"&amp;api_secret=\"</span> <span class=\"token operator\">+</span>\n      ck_secret\n  <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">convertkitRes</span><span class=\"token operator\">:</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">.</span>total_subscribers\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Once we get a response from ConvertKit, we convert that response to a useable JSON Object, write the value to the Log for debugging purposes and then return the specific data we needed.</p>\n<p>Now anytime you call the <code class=\"language-text\">getSubscriberCount()</code> function it will return your current subscriber count. You can then call this around your <code class=\"language-text\">gatsby-node.js</code> file as needed.</p>\n<h2 id=\"pass-the-subscriber-count-to-your-pages\" style=\"position:relative;\"><a href=\"#pass-the-subscriber-count-to-your-pages\" aria-label=\"pass the subscriber count to your pages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pass The Subscriber Count To Your Pages</h2>\n<p>When you generate pages in <code class=\"language-text\">gatsby-node.js</code> you're able to pass data down to the page template in the form of Page Context. First we pull in our <a href=\"https://convertkit.com?lmref=HnoQfg\">ConvertKit</a> Keys with <code class=\"language-text\">dotenv</code> and pass them into our fancy new <code class=\"language-text\">getSubscriberCount()</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">CONVERTKIT_SECRET</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">CONVERTKIT_KEY</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env\n<span class=\"token keyword\">const</span> subscriberCount <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getSubscriberCount</span><span class=\"token punctuation\">(</span>\n      <span class=\"token constant\">CONVERTKIT_SECRET</span><span class=\"token punctuation\">,</span>\n      <span class=\"token constant\">CONVERTKIT_KEY</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<p>Then, when you call Gatsby's <code class=\"language-text\">createPage</code> to actually generate your pages you just pass in your subscriber count through the <code class=\"language-text\">context</code> object:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/newsletter/\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">src/templates/newsletter.js</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">context</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token literal-property property\">subscriberCount</span><span class=\"token operator\">:</span> subscriberCount<span class=\"token punctuation\">,</span></span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h2 id=\"using-page-context-to-display-your-subscriber-count\" style=\"position:relative;\"><a href=\"#using-page-context-to-display-your-subscriber-count\" aria-label=\"using page context to display your subscriber count permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using Page Context to Display Your Subscriber Count</h2>\n<p>Now that our Newsletter page gets generated with access to our Subscriber count let's modify the page template to include it. In my case the template file is <code class=\"language-text\">src/templates/newsletter.js</code> but pick whichever page your trying to modify.</p>\n<p>Page templates in Gatsby are just React Components that receive some data through Props and output JSX to be compiled to HTML at build time.</p>\n<p>Check out this example Functional Component:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Newsletter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> pageContext <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> subscriberCount <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> pageContext\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>subscriberCount<span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Newsletter</code></pre></div>\n<p>All this is doing is destructuring the <code class=\"language-text\">pageContext</code> variable out of the Props, and then further destructuring <code class=\"language-text\">pageContext</code> to get the <code class=\"language-text\">subscriberCount</code> variable we passed in earlier.</p>\n<p>You can further simplify this with a process called nested destructuring:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Newsletter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> \n<span class=\"gatsby-highlight-code-line\">    <span class=\"token literal-property property\">pageContext</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> subscriberCount <span class=\"token punctuation\">}</span> </span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>subscriberCount<span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Newsletter</code></pre></div>\n<p>In this case the <code class=\"language-text\">pageContext</code> variable is never assigned since all we need from it is the <code class=\"language-text\">subscriberCount</code>. Keep in mind that if you use nested destructuring to extract a variable out of an object the original variable is never assigned. If you need more than one thing out of the <code class=\"language-text\">pageContext</code> variable you need to destructure both variables at the same time:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Newsletter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n  data<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token literal-property property\">pageContext</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> recentEmails<span class=\"token punctuation\">,</span> subscriberCount <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></code></pre></div>\n<h2 id=\"show-off\" style=\"position:relative;\"><a href=\"#show-off\" aria-label=\"show off permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Show OFF!</h2>\n<p>Now that we have our <code class=\"language-text\">subscriberCount</code> assigned to a variable in our page template, all that's left to do is put it somewhere in our JSX. You can either output it directly in the template:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Newsletter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> pageContext <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> subscriberCount <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> pageContext\n\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span>Join <span class=\"token punctuation\">{</span>subscriberCount<span class=\"token punctuation\">}</span> Other Subscribers <span class=\"token constant\">TODAY</span><span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span></span>    <span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>or pass it down as a Prop into a different Component:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Newsletter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> pageContext <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> subscriberCount <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> pageContext\n\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span>Counter count<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>subscriberCount<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></span>    <span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"thats-all-folks\" style=\"position:relative;\"><a href=\"#thats-all-folks\" aria-label=\"thats all folks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>That's All Folks</h2>\n<p>Now you're able to access your <a href=\"https://convertkit.com?lmref=HnoQfg\">ConvertKit</a> Subscriber count from anywhere on your Gatsby site, safely and securely!</p>\n<p>The one downside to this method is that your published subscriber count will only update when you build the site, but maybe you can use that as motivation to post more content.</p>\n<h2 id=\"take-it-even-further\" style=\"position:relative;\"><a href=\"#take-it-even-further\" aria-label=\"take it even further permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Take It Even Further</h2>\n<p>Some suggestions for taking this tutorial further:</p>\n<ul>\n<li>An alternative option to explore if you need that number <em>all over</em> would be adding it as a node on your GraphQL tree instead of using Page Context. Then you could request it in any GraphQl Query you make.</li>\n<li>Automate your CI/CD process to either rebuild the site daily or listen for a ConverKit Webhook to rebuild the site on every new subscriber.</li>\n</ul>\n<h2 id=\"let-me-know-on-twitter-jackharner-if-you-have-any-questions-or-implemented-any-part-of-this-yourself-id-love-to-see-it\" style=\"position:relative;\"><a href=\"#let-me-know-on-twitter-jackharner-if-you-have-any-questions-or-implemented-any-part-of-this-yourself-id-love-to-see-it\" aria-label=\"let me know on twitter jackharner if you have any questions or implemented any part of this yourself id love to see it permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let me know on Twitter <a href=\"https://twitter.com/jackharner\">@JackHarner</a> if you have any questions or implemented any part of this yourself! I'd love to see it!</h2>\n<h4 id=\"featured-image-by-a-hrefhttpsunsplashcomnhillierutm_sourceunsplashamputm_mediumreferralamputm_contentcreditcopytextnick-hilliera-on-a-hrefhttpsunsplashcomsphotosnumberutm_sourceunsplashamputm_mediumreferralamputm_contentcreditcopytextunsplasha\" style=\"position:relative;\"><a href=\"#featured-image-by-a-hrefhttpsunsplashcomnhillierutm_sourceunsplashamputm_mediumreferralamputm_contentcreditcopytextnick-hilliera-on-a-hrefhttpsunsplashcomsphotosnumberutm_sourceunsplashamputm_mediumreferralamputm_contentcreditcopytextunsplasha\" aria-label=\"featured image by a hrefhttpsunsplashcomnhillierutm_sourceunsplashamputm_mediumreferralamputm_contentcreditcopytextnick hilliera on a hrefhttpsunsplashcomsphotosnumberutm_sourceunsplashamputm_mediumreferralamputm_contentcreditcopytextunsplasha permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Featured Image by <a href=\"https://unsplash.com/@nhillier?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText\">Nick Hillier</a> on <a href=\"https://unsplash.com/s/photos/number?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText\">Unsplash</a></h4>","excerpt":"Do you want to include the Subscriber Count from your ConvertKit Newsletter on your Gatsby.js Site? If that oddly specific scenario applies to you…","wordCount":{"words":1059},"frontmatter":{"date":"October 18, 2020","updated":null,"title":"Display ConvertKit Subscriber Count On Your Gatsby Site","subtitle":"Use Social Proof To Drive More Newsletter Signups","tags":["Gatsby","Automation","JavaScript","Tutorial"],"featuredImage":{"absolutePath":"/home/runner/work/jackharner-gatsby/jackharner-gatsby/content/blog/convertkit-subscriber-count-on-gatsby-site/nick-hillier-yD5rv8_WzxA-unsplash.jpg","childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#383838","images":{"fallback":{"src":"/static/95e7f8fda66383cb6f3026bb4df90fc3/5267c/nick-hillier-yD5rv8_WzxA-unsplash.jpg","srcSet":"/static/95e7f8fda66383cb6f3026bb4df90fc3/7284f/nick-hillier-yD5rv8_WzxA-unsplash.jpg 750w,\n/static/95e7f8fda66383cb6f3026bb4df90fc3/29ba9/nick-hillier-yD5rv8_WzxA-unsplash.jpg 1080w,\n/static/95e7f8fda66383cb6f3026bb4df90fc3/c8896/nick-hillier-yD5rv8_WzxA-unsplash.jpg 1366w,\n/static/95e7f8fda66383cb6f3026bb4df90fc3/5267c/nick-hillier-yD5rv8_WzxA-unsplash.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/95e7f8fda66383cb6f3026bb4df90fc3/57584/nick-hillier-yD5rv8_WzxA-unsplash.webp 750w,\n/static/95e7f8fda66383cb6f3026bb4df90fc3/984df/nick-hillier-yD5rv8_WzxA-unsplash.webp 1080w,\n/static/95e7f8fda66383cb6f3026bb4df90fc3/4a276/nick-hillier-yD5rv8_WzxA-unsplash.webp 1366w,\n/static/95e7f8fda66383cb6f3026bb4df90fc3/9c00f/nick-hillier-yD5rv8_WzxA-unsplash.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6666666666666666}}},"ogImage":{"absolutePath":"/home/runner/work/jackharner-gatsby/jackharner-gatsby/content/blog/convertkit-subscriber-count-on-gatsby-site/jackharner-convertkit-blog-og.png","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#e81868","images":{"fallback":{"src":"/static/ec3f0e543a05869c930de9d70ba79175/b5380/jackharner-convertkit-blog-og.png","srcSet":"/static/ec3f0e543a05869c930de9d70ba79175/a0e1b/jackharner-convertkit-blog-og.png 300w,\n/static/ec3f0e543a05869c930de9d70ba79175/86184/jackharner-convertkit-blog-og.png 600w,\n/static/ec3f0e543a05869c930de9d70ba79175/b5380/jackharner-convertkit-blog-og.png 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/ec3f0e543a05869c930de9d70ba79175/c7da1/jackharner-convertkit-blog-og.webp 300w,\n/static/ec3f0e543a05869c930de9d70ba79175/22c65/jackharner-convertkit-blog-og.webp 600w,\n/static/ec3f0e543a05869c930de9d70ba79175/81547/jackharner-convertkit-blog-og.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":630}}}},"fields":{"externalLink":"","externalLinkLabel":"Check It Out »","slug":"/blog/convertkit-subscriber-count-on-gatsby-site/","ogImage":"./jackharner-convertkit-blog-og.png","date":"October 18, 2020","unlisted":false}}},"pageContext":{"slug":"/blog/convertkit-subscriber-count-on-gatsby-site/","related":[{"id":"2cf50020-f31f-5b7f-b1e4-9ee941e40093","excerpt":"At Shoolu, we take advantage of Custom Fields on products in BigCommerce all the time. Our inventory software runs some rules against the…","fields":{"date":"2020-06-09T16:35:09.669Z","slug":"/blog/get-custom-field-by-name-bigcommerce-stencil/","collection":"blog","published":true,"externalLink":"","externalLinkLabel":"Check It Out »"},"frontmatter":{"title":"Custom Fields By Name","subtitle":"In BigCommerce Stencil Themes","tags":["BigCommerce","Tutorial"],"published":true,"featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#a8b8c8","images":{"fallback":{"src":"/static/1d3a10e71aba0aa2c3229f08e3521000/f674c/featured-image.jpg","srcSet":"/static/1d3a10e71aba0aa2c3229f08e3521000/329bc/featured-image.jpg 156w,\n/static/1d3a10e71aba0aa2c3229f08e3521000/20b50/featured-image.jpg 312w,\n/static/1d3a10e71aba0aa2c3229f08e3521000/f674c/featured-image.jpg 623w,\n/static/1d3a10e71aba0aa2c3229f08e3521000/344b2/featured-image.jpg 1246w","sizes":"(min-width: 623px) 623px, 100vw"},"sources":[{"srcSet":"/static/1d3a10e71aba0aa2c3229f08e3521000/ad4f0/featured-image.webp 156w,\n/static/1d3a10e71aba0aa2c3229f08e3521000/6c059/featured-image.webp 312w,\n/static/1d3a10e71aba0aa2c3229f08e3521000/4b1b8/featured-image.webp 623w,\n/static/1d3a10e71aba0aa2c3229f08e3521000/de033/featured-image.webp 1246w","type":"image/webp","sizes":"(min-width: 623px) 623px, 100vw"}]},"width":623,"height":350}}}}},{"id":"7d4b8aec-6a85-58e1-bafe-079f2d257e0e","excerpt":"Do you frequently update WordPress themes? It's kind of a pain in the ass, right?  Typically has to be done manually through FTP or…","fields":{"date":"2018-09-11T05:33:10.000Z","slug":"/blog/pushing-wordpress-theme-updates-with-git/","collection":"blog","published":true,"externalLink":"","externalLinkLabel":"Check It Out »"},"frontmatter":{"title":"Pushing WordPress Theme Updates With Git","subtitle":"","tags":["WordPress","Git","Automation"],"published":true,"featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#e81868","images":{"fallback":{"src":"/static/124be52bbf346d8c60c354150e3cbdd7/83513/featuredImage.png","srcSet":"/static/124be52bbf346d8c60c354150e3cbdd7/524f8/featuredImage.png 172w,\n/static/124be52bbf346d8c60c354150e3cbdd7/9c87a/featuredImage.png 344w,\n/static/124be52bbf346d8c60c354150e3cbdd7/83513/featuredImage.png 687w,\n/static/124be52bbf346d8c60c354150e3cbdd7/f8354/featuredImage.png 1374w","sizes":"(min-width: 687px) 687px, 100vw"},"sources":[{"srcSet":"/static/124be52bbf346d8c60c354150e3cbdd7/fa0cb/featuredImage.webp 172w,\n/static/124be52bbf346d8c60c354150e3cbdd7/470f7/featuredImage.webp 344w,\n/static/124be52bbf346d8c60c354150e3cbdd7/a5f32/featuredImage.webp 687w,\n/static/124be52bbf346d8c60c354150e3cbdd7/a73ea/featuredImage.webp 1374w","type":"image/webp","sizes":"(min-width: 687px) 687px, 100vw"}]},"width":687,"height":350}}}}},{"id":"77e338de-3947-5507-81ec-a2f8a025b4b4","excerpt":"You probably found this post because you're trying to crop images in WordPress' Media Library Image Editor. The button's greyed out right…","fields":{"date":"2018-12-17T06:06:29.000Z","slug":"/blog/wordpress-crop-image-button-grayed-out/","collection":"blog","published":true,"externalLink":"","externalLinkLabel":"Check It Out »"},"frontmatter":{"title":"WordPress Crop Image Button Grayed Out","subtitle":"How To Fix Cropping Issues","tags":["WordPress"],"published":true,"featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#e81868","images":{"fallback":{"src":"/static/124be52bbf346d8c60c354150e3cbdd7/83513/featuredImage.png","srcSet":"/static/124be52bbf346d8c60c354150e3cbdd7/524f8/featuredImage.png 172w,\n/static/124be52bbf346d8c60c354150e3cbdd7/9c87a/featuredImage.png 344w,\n/static/124be52bbf346d8c60c354150e3cbdd7/83513/featuredImage.png 687w,\n/static/124be52bbf346d8c60c354150e3cbdd7/f8354/featuredImage.png 1374w","sizes":"(min-width: 687px) 687px, 100vw"},"sources":[{"srcSet":"/static/124be52bbf346d8c60c354150e3cbdd7/fa0cb/featuredImage.webp 172w,\n/static/124be52bbf346d8c60c354150e3cbdd7/470f7/featuredImage.webp 344w,\n/static/124be52bbf346d8c60c354150e3cbdd7/a5f32/featuredImage.webp 687w,\n/static/124be52bbf346d8c60c354150e3cbdd7/a73ea/featuredImage.webp 1374w","type":"image/webp","sizes":"(min-width: 687px) 687px, 100vw"}]},"width":687,"height":350}}}}},{"id":"55f82450-78bd-52bc-8f8e-70d0e23843cb","excerpt":"SetAttributes() Doesn't Automatically Convert Types I was using a SelectControl to set a Category ID for a specific Gutenberg block I was…","fields":{"date":"2022-03-15T18:57:39.197Z","slug":"/blog/gutenberg-selectcontrol-not-saving-attributes/","collection":"blog","published":true,"externalLink":"","externalLinkLabel":"Check It Out »"},"frontmatter":{"title":"SelectControl Not Saving Attributes","subtitle":"Troubleshooting and Fixing A Custom Gutenberg Block","tags":["WordPress"],"published":true,"featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#084898","images":{"fallback":{"src":"/static/af0bb5be96a29883f616acee4e8a72c7/18b2e/featuredImage.png","srcSet":"/static/af0bb5be96a29883f616acee4e8a72c7/a4d46/featuredImage.png 175w,\n/static/af0bb5be96a29883f616acee4e8a72c7/d8f52/featuredImage.png 350w,\n/static/af0bb5be96a29883f616acee4e8a72c7/18b2e/featuredImage.png 700w","sizes":"(min-width: 700px) 700px, 100vw"},"sources":[{"srcSet":"/static/af0bb5be96a29883f616acee4e8a72c7/eac4f/featuredImage.webp 175w,\n/static/af0bb5be96a29883f616acee4e8a72c7/a4795/featuredImage.webp 350w,\n/static/af0bb5be96a29883f616acee4e8a72c7/377b6/featuredImage.webp 700w","type":"image/webp","sizes":"(min-width: 700px) 700px, 100vw"}]},"width":700,"height":350}}}}}]}},"staticQueryHashes":["3649515864","764694655"],"slicesMap":{}}