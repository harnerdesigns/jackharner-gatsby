{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/auto-generate-content-gatsby/","result":{"data":{"markdownRemark":{"html":"<p>JackHarner.com is built with Gatsby, a framework based on React that makes blazing fast websites. </p>\n<p><img src=\"/820ea87f3049eb9b2b311f03873a0118/gatsby-logo.svg\" alt=\"Gatsby Logo\"></p>\n<p>I have my Blog and Portfolio content setup as a couple of directories with subdirectories for the individual posts. Like so: </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src/\n| ...\n| content/\n  | blog/\n    | blog-post/\n      | index.md\n      | featuredImage.png\n      | ...\n    | blog-post-2/\n      | index.md\n      | featuredImage.png\n      | ...\n    | ...\n  | portfolio/\n    | ...</code></pre></div>\n<p>Each of the <code class=\"language-text\">index.md</code> files contains a block of frontmatter dsecribing attributes about the post.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">---\ndate: 2019-12-22T18:23:53.017Z\ntitle: &quot;Auto-Generate Content Folders In Gatsby&quot; \nsubtitle: &quot;Preformat Your Frontmatter &amp; More&quot;\nfeaturedImage: &quot;./featuredImage.png&quot;\ntags: [&#39;Gatsby&#39;, &#39;Node&#39;]\nexternalLink: &quot;&quot;\npublished: true\n---</code></pre></div>\n<p>All of these folders and files are then parsed at build time to generate the pages and the content throughout the site. </p>\n<p>As some of you may know, I'm very lazy, but Lazy in the good way where I don't like doing repetitive tasks more than once or twice. I've automated tons of simple tasks in my day to day at <a href=\"../../portfolio/shoolu\">Shoolu</a>. Things like Running Reports, and processing product photos are all now 1-2 click tasks, when they used to take hours out of my day every week.</p>\n<p>I wanted starting a new blog post or portfolio piece to be as simple as possible, and with this I've gotten it down to:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"command-line-prompt\"><span data-user=jack data-host=localhost></span></span><span class=\"token function\">npm</span> run newBlog</code></pre></div>\n<p>Let's look at how I did it and how you can speed up a small part of updating your Gatsby site with Node.</p>\n<h2>Create the Template Directory</h2>\n<p>Create a new directory in your <code class=\"language-text\">/src/content/</code> folder called <code class=\"language-text\">templates/</code>. Inside your new <code class=\"language-text\">templates/</code> directory create a new directory for every post type you want to automate. In my case it will be <code class=\"language-text\">blog/</code> and <code class=\"language-text\">portfolio/</code>.</p>\n<p>Now your project should look a little something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src/\n| ...\n| content/\n  | blog/\n    | ...\n  | portfolio/\n    | ...\n  | templates/\n    | blog/\n      | &lt;empty folder&gt;\n    | portfolio/\n      | &lt;empty folder&gt;</code></pre></div>\n<p>{{{vert}}}</p>\n<h2>Get Template-ing</h2>\n<p>This is where you'll need to customize this tutorial to fit with your site and preexisting content. Inside your <code class=\"language-text\">/src/content/templates/&lt;post-type&gt;</code> directory, create versions of the files you will need every time you create a post. For me, that includes an <code class=\"language-text\">index.md</code> file with some custom frontmatter, and a <code class=\"language-text\">featuredImage.png</code>.</p>\n<p>Take a look at my <code class=\"language-text\">templates/blog/index.md</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token hr punctuation\">---</span>\ndate: $date\ntitle: \"$title\" \nsubtitle: \"\"\nfeaturedImage: \"./featuredImage.png\"\ntags: ['']\nexternalLink: \"\"\n<span class=\"token title important\">published: false\n<span class=\"token punctuation\">---</span></span></code></pre></div>\n<p>Notice the <code class=\"language-text\">$date</code> and <code class=\"language-text\">$title</code> variables in the frontmatter. We will be replacing those variables down the line. </p>\n<p>My default Featured Image is just a solid pink image to match the branding of the site: </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAAF0lEQVQoz2N4KZf8n5qYYdTAUQOHo4EAkbziGJZmILkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Default Featured Image\"\n        title=\"Default Featured Image\"\n        src=\"/static/124be52bbf346d8c60c354150e3cbdd7/c1b63/defaultFeaturedImage.png\"\n        srcset=\"/static/124be52bbf346d8c60c354150e3cbdd7/5a46d/defaultFeaturedImage.png 300w,\n/static/124be52bbf346d8c60c354150e3cbdd7/0a47e/defaultFeaturedImage.png 600w,\n/static/124be52bbf346d8c60c354150e3cbdd7/c1b63/defaultFeaturedImage.png 1200w,\n/static/124be52bbf346d8c60c354150e3cbdd7/d61c2/defaultFeaturedImage.png 1800w,\n/static/124be52bbf346d8c60c354150e3cbdd7/81ebd/defaultFeaturedImage.png 1868w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>The Featured Image is pretty much always going to be changed down the line. One problem I've run into is that Gatsby, as far as I know, doesn't allow you to set default Frontmatter values. However, having the default allows me to not have to remember \"featuredImage.png\" when saving the updated image (I can just overwrite the default). </p>\n<h2>Script All The Things!</h2>\n<p>Now that we've got our template, we're going to write a Node script that copies the folder and replaces some variables with user input. </p>\n<p>We do need a few dependencies so run this command in your projects root folder:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"command-line-prompt\"><span data-user=jack data-host=localhost></span></span><span class=\"token function\">npm</span> i --save-dev readline-sync ncp replace-in-file</code></pre></div>\n<ul>\n<li><code class=\"language-text\">readline-sync</code> allows for super simple Node CLI Prompts to take in user input.</li>\n<li><code class=\"language-text\">ncp</code> is a tool to help Node copy folders recursively.</li>\n<li><code class=\"language-text\">replace-in-file</code> makes it really easy to substitute values for defined variables in the copied version of the file.</li>\n</ul>\n<p>In the root folder for the project, create a new directory called <code class=\"language-text\">tools/</code> and in that a new file called <code class=\"language-text\">newBlog.js</code></p>\n<p>At the top of <code class=\"language-text\">newBlog.js</code> declare all of the dependencies we'll need:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> readline <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'readline-sync'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> ncp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ncp'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>ncp<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> replace <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'replace-in-file'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Next up is to define some variables we are going to use and take in the User Input for Title &#x26; Slug:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> postTitle <span class=\"token operator\">=</span> readline<span class=\"token punctuation\">.</span><span class=\"token function\">question</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"What is the title? \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> slug <span class=\"token operator\">=</span> readline<span class=\"token punctuation\">.</span><span class=\"token function\">question</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Slug? [Default: '\"</span><span class=\"token operator\">+</span> <span class=\"token function\">string_to_slug</span><span class=\"token punctuation\">(</span>postTitle<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span><span class=\"token string\">\"'] \"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>defaultInput<span class=\"token operator\">:</span> <span class=\"token function\">string_to_slug</span><span class=\"token punctuation\">(</span>postTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> date <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toISOString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> sourcePath <span class=\"token operator\">=</span> <span class=\"token string\">\"./src/content/templates/blog/\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> destPath <span class=\"token operator\">=</span> <span class=\"token string\">\"./src/content/blog/\"</span> <span class=\"token operator\">+</span> slug<span class=\"token punctuation\">;</span></code></pre></div>\n<p>By setting a default value for the Slug allows me to set the slug to something other than the default, if I want to. Otherwise it just sets it to a url-encoded version of the title. </p>\n<p>Generating the default slug from the given title is done with the following function:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">string_to_slug</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    str <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/^\\s+|\\s+$/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// trim</span>\n    str <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n    <span class=\"token comment\">// remove accents, swap ñ for n, etc</span>\n    <span class=\"token keyword\">var</span> <span class=\"token keyword\">from</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"àáäâèéëêìíïîòóöôùúüûñç·/_,:;\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> to   <span class=\"token operator\">=</span> <span class=\"token string\">\"aaaaeeeeiiiioooouuuunc------\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> l<span class=\"token operator\">=</span><span class=\"token keyword\">from</span><span class=\"token punctuation\">.</span>length <span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;</span>l <span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        str <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">from</span><span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> to<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    str <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/[^a-z0-9 -]/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// remove invalid chars</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/\\s+/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// collapse whitespace and replace by -</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/-+/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// collapse dashes</span>\n\n    <span class=\"token keyword\">return</span> str\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>It takes in a string, removes whitespace, converts non url-encoded characters, and replaces spaces with <code class=\"language-text\">-</code> dashes. (\"What's Up Fool?\" -> \"whats-up-fool\"). </p>\n<h2>Time To Copy</h2>\n<p>Since everything is set up, it's time to copy the directory. We use <code class=\"language-text\">ncp</code> which is a Node package to replicate Linux's <code class=\"language-text\">cp</code> command. It takes in the Source Folder, the Destination Folder, and a Callback as arguments. </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">ncp</span><span class=\"token punctuation\">(</span>sourcePath<span class=\"token punctuation\">,</span> destPath<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Done Copying'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ... Do Stuff After Copying Is Done</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Replace The Template Variables</h2>\n<p>Remember the <code class=\"language-text\">$date</code> and <code class=\"language-text\">$title</code> variables from earlier? Now it's time to swap those out for real values. Using the <code class=\"language-text\">replace-in-file</code> Node Package makes this super simple. </p>\n<p>The <code class=\"language-text\">replace()</code> function takes in an Options Object and a callback. Here's our Options Object:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> replaceOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    files<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>destPath <span class=\"token operator\">+</span> <span class=\"token string\">\"/index.md\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">from</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token regex\">/\\$title/g</span><span class=\"token punctuation\">,</span> <span class=\"token regex\">/\\$date/g</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    to<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>postTitle<span class=\"token punctuation\">,</span> date<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> </code></pre></div>\n<p>Define the files to search in, the keys to search for (can be Regex or just a string), &#x26; what to replace them with then <code class=\"language-text\">replace-in-file</code> does all the heavy lifting.  If you pass in an array to both <code class=\"language-text\">from</code> and <code class=\"language-text\">to</code> it will replace the first key in the <code class=\"language-text\">from</code> array to the first value in the <code class=\"language-text\">to</code> array, and so on, allowing you to replace multiple things in one go.</p>\n<p>All that's left is to pass in our options and the callback function. </p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>replaceOptions<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> changedFiles</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error occurred:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Modified files:'</span><span class=\"token punctuation\">,</span> changedFiles<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">', '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Code, Comments, ACTION!</h2>\n<p>You have two options when it comes to actually running the script. </p>\n<ul>\n<li>Just run the script with Node: <code class=\"language-text\">$ node tools/newBlog.js</code></li>\n<li>Add <code class=\"language-text\">node tools/newBlog.js</code> to your <code class=\"language-text\">package.json</code> as a script and run it through NPM (i.e. <code class=\"language-text\">$ npm run newBlog</code>).</li>\n</ul>\n<p>Then enter a title, optionally pick a slug and away we go! </p>\n<h2>Where To Go From Here?</h2>\n<p>If you wanted to take this script a few steps further, here are some ideas to get you started.</p>\n<ul>\n<li>Duplicate your <code class=\"language-text\">tools/newBlog.js</code> file for every other post type, modifying as necessary. </li>\n<li>Refactor the script to be able to handle any post type you throw at it. <code class=\"language-text\">readline-sync</code> has a whole lot of options for taking in user input. </li>\n<li>Create as much content as possible, and automate as many things as possible.</li>\n</ul>\n<p><a href=\"https://twitter.com/jackharner\">Hit me up on Twitter</a> if you implement this script in your Gatsby site! I'd love to hear your suggestions.</p>\n<h2>If You're Lazy, Here's the full script:</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> readline <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'readline-sync'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> ncp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ncp'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>ncp<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> replace <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'replace-in-file'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> postTitle <span class=\"token operator\">=</span> readline<span class=\"token punctuation\">.</span><span class=\"token function\">question</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"What is the title? \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> slug <span class=\"token operator\">=</span> readline<span class=\"token punctuation\">.</span><span class=\"token function\">question</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Slug? [Default: '\"</span><span class=\"token operator\">+</span> <span class=\"token function\">string_to_slug</span><span class=\"token punctuation\">(</span>postTitle<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span><span class=\"token string\">\"'] \"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>defaultInput<span class=\"token operator\">:</span> <span class=\"token function\">string_to_slug</span><span class=\"token punctuation\">(</span>postTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> date <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toISOString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> sourcePath <span class=\"token operator\">=</span> <span class=\"token string\">\"./src/content/templates/blog/\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> destPath <span class=\"token operator\">=</span> <span class=\"token string\">\"./src/content/blog/\"</span> <span class=\"token operator\">+</span> slug<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> replaceOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    files<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>destPath <span class=\"token operator\">+</span> <span class=\"token string\">\"/index.md\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">from</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token regex\">/\\$title/g</span><span class=\"token punctuation\">,</span> <span class=\"token regex\">/\\$date/g</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    to<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>postTitle<span class=\"token punctuation\">,</span> date<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> \n\n\n<span class=\"token function\">ncp</span><span class=\"token punctuation\">(</span>sourcePath<span class=\"token punctuation\">,</span> destPath<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Done Copying'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>replaceOptions<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> changedFiles</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error occurred:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Modified files:'</span><span class=\"token punctuation\">,</span> changedFiles<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">', '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">string_to_slug</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    str <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/^\\s+|\\s+$/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// trim</span>\n    str <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n    <span class=\"token comment\">// remove accents, swap ñ for n, etc</span>\n    <span class=\"token keyword\">var</span> <span class=\"token keyword\">from</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"àáäâèéëêìíïîòóöôùúüûñç·/_,:;\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> to   <span class=\"token operator\">=</span> <span class=\"token string\">\"aaaaeeeeiiiioooouuuunc------\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> l<span class=\"token operator\">=</span><span class=\"token keyword\">from</span><span class=\"token punctuation\">.</span>length <span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;</span>l <span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        str <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">from</span><span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> to<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    str <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/[^a-z0-9 -]/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// remove invalid chars</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/\\s+/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// collapse whitespace and replace by -</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/-+/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// collapse dashes</span>\n\n    <span class=\"token keyword\">return</span> str<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","excerpt":"JackHarner.com is built with Gatsby, a framework based on React that makes blazing fast websites.  Gatsby Logo I have my Blog and Portfolio content…","wordCount":{"words":888},"frontmatter":{"date":"December 22, 2019","updated":null,"title":"Auto-Generate Content Folders In Gatsby","subtitle":"Preformat Your Frontmatter & More","tags":["Gatsby","Node","Automation"],"featuredImage":{"absolutePath":"/home/runner/work/jackharner-gatsby/jackharner-gatsby/content/blog/auto-generate-content-gatsby/featuredImage.jpg","childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEAQX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABWzmXzTmCf//EABsQAAEEAwAAAAAAAAAAAAAAAAEAAhESAyEx/9oACAEBAAEFAsTbihTeM0rQJgf/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwFn/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BJ//EABkQAAIDAQAAAAAAAAAAAAAAAAABETEyYf/aAAgBAQAGPwK0WnwyQQI//8QAHBAAAgIDAQEAAAAAAAAAAAAAAREAITFBUYHB/9oACAEBAAE/IT4L35OQHQUCrbcDZUYOe2ZWJ12f/9oADAMBAAIAAwAAABAw3//EABcRAQADAAAAAAAAAAAAAAAAAAEQESH/2gAIAQMBAT8QsOx//8QAFhEBAQEAAAAAAAAAAAAAAAAAIQEQ/9oACAECAQE/EFDP/8QAGhABAQEBAQEBAAAAAAAAAAAAAREAITFBYf/aAAgBAQABPxCIKWntwOtYtVYS4m8frcxRV2PyYOV4U1WeGBRce8fN/9k=","aspectRatio":1.5037593984962405,"src":"/static/bc2a937d47ea91cb852001a44e11cff7/14b42/featuredImage.jpg","srcSet":"/static/bc2a937d47ea91cb852001a44e11cff7/f836f/featuredImage.jpg 200w,\n/static/bc2a937d47ea91cb852001a44e11cff7/2244e/featuredImage.jpg 400w,\n/static/bc2a937d47ea91cb852001a44e11cff7/14b42/featuredImage.jpg 800w,\n/static/bc2a937d47ea91cb852001a44e11cff7/47498/featuredImage.jpg 1200w,\n/static/bc2a937d47ea91cb852001a44e11cff7/0e329/featuredImage.jpg 1600w,\n/static/bc2a937d47ea91cb852001a44e11cff7/c361f/featuredImage.jpg 4256w","sizes":"(max-width: 800px) 100vw, 800px","originalImg":"/static/bc2a937d47ea91cb852001a44e11cff7/c361f/featuredImage.jpg"}}},"ogImage":null},"fields":{"externalLink":"","externalLinkLabel":"Check It Out »","slug":"/blog/auto-generate-content-gatsby/","ogImage":"","date":"December 22, 2019","unlisted":false}}},"pageContext":{"slug":"/blog/auto-generate-content-gatsby/","related":[{"id":"bfeeada3-0a1c-5f16-98ec-53a957780a04","excerpt":"I read this great article from @swizec about how he made almost $400k over 5 years on the side through books, courses and other digital…","fields":{"date":"2020-07-25T19:42:25.402Z","slug":"/blog/lets-make-a-newsletter/","collection":"blog","published":true,"externalLink":"","externalLinkLabel":"Check It Out »"},"frontmatter":{"title":"Let's Make A Newsletter","subtitle":"Mailing Lists Are King","tags":["Newsletter"],"published":true,"featuredImage":{"childImageSharp":{"resize":{"src":"/static/22e8797ae72e98b620c3c6fddb12e28e/5ff92/liam-truong-oeDH20DVb2A-unsplash.jpg"}}}}},{"id":"46dde03b-71ea-58ae-9a77-94d48debc139","excerpt":"Read My Diary 😉 I was asked to guest post on the BigCommerce Developer blog as part of their Developer Diaries series. The series looks at…","fields":{"date":"2019-11-22T17:14:33.962Z","slug":"/blog/bigcommerce-developer-diary/","collection":"blog","published":true,"externalLink":"https://medium.com/bigcommerce-developer-blog/developer-diary-jack-harner-shoolu-com-ad163caeda35","externalLinkLabel":"Check It Out »"},"frontmatter":{"title":"BigCommerce Developer Diary","subtitle":"A Week In My Work Life","tags":["BigCommerce","Career","Automation"],"published":true,"featuredImage":{"childImageSharp":{"resize":{"src":"/static/88b5fd923814a1f1eff643a19a6cc19d/5ff92/featuredImage.jpg"}}}}},{"id":"a3d5e29c-5dc0-53b7-b8ca-b519f5d50e8d","excerpt":"MkDocs is a \"fast, simple and downright gorgeous\" static site generator for turning a collection of Markdown files into a documentation site…","fields":{"date":"2020-08-09T11:53:35.000Z","slug":"/blog/generate-a-docs-site-instantly/","collection":"blog","published":true,"externalLink":"","externalLinkLabel":"Check It Out »"},"frontmatter":{"title":"Generate Documentation From Markdown AUTOMATICALLY","subtitle":"Meet MkDocs","tags":["Automation","Markdown","Python","Newsletter"],"published":true,"featuredImage":{"childImageSharp":{"resize":{"src":"/static/d17fa935e155b23ff8c349c2d6a282f1/5ff92/maarten-van-den-heuvel-8EzNkvLQosk-unsplash.jpg"}}}}}]}},"staticQueryHashes":["3649515864","764694655"]}